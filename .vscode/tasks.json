{
    "version": "2.0.0",
    "tasks": [
        {   
            "label": "Clean target",
            "command": "/bin/sh",
            "args": ["-c", "rm -Rf target"],
            "type": "shell"
        },
        {
            "label": "Build dummy code",
            "command": "/bin/sh",
            "args": ["-c", "mkdir -p target && ./btpc64macOS < dummy.pas > target/dummyExec && chmod +x target/dummyExec"],
            "type": "shell",
            "dependsOn": [
                "Clean target"
            ]
        },
        {
            "label": "Run dummy code",
            "command": "/bin/sh",
            "args": ["-c", "target/dummyExec"],
            "type": "shell",
            "dependsOn": [
                "Build dummy code"
            ]
        },
        {
            "label": "Disassemble dummy code (full)",
            "command": "/bin/sh",
            "args": ["-c", "otool -tvV target/dummyExec > target/dummyExec.full.asm"],
            "type": "shell",
            "dependsOn": [
                "Build dummy code"
            ]
        },
        {
            "label": "Disassemble dummy code (short)",
            "command": "/bin/sh",
            "args": ["-c", "cat target/dummyExec.full.asm | sed -n '/^ProgramEntryPoint:$/,$p' > target/dummyExec.short.asm"],
            "dependsOn": [
                "Disassemble dummy code (full)"
            ]
        }
    ]
}